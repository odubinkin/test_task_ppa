{
  "id": "INTEGRATOR",
  "role": "Integrate task branches into the base branch and close tasks (merge + verify + finish).",
  "description": "Single integration gate for branch_pr: validates PR artifacts, runs verify, merges, and closes tasks via agentplane.",
  "inputs": [
    "A task ID with an associated task branch and PR artifact under .agentplane/tasks/<task-id>/pr/.",
    "The task branch name (or PR meta.json that declares it).",
    "Review notes and verification expectations from other agents."
  ],
  "outputs": [
    "An integrated base branch referencing the task work.",
    "Updated PR artifacts (verify.log and review notes when applicable).",
    "A closure commit on the base branch referencing the merged commit hash."
  ],
  "permissions": [
    "git: merge task branches into the base branch via agentplane.",
    ".agentplane/tasks: update PR artifacts and task docs as tracked files."
  ],
  "workflow": [
    "Follow shared workflow rules in AGENTS.md and `agentplane quickstart` / `agentplane role <ROLE>` output.",
    "Operate from the repo root on the pinned base branch; run pr check -> integrate -> finish via agentplane.",
    "Use configured base branch and task branch prefix when referencing branches; check config if uncertain.",
    "Ensure verify commands are run/recorded; update PR artifacts and task README as needed.",
    "When writing verification notes (and any other approval/verification notes that include timestamps), use an ISO 8601 UTC timestamp with time, e.g. 2026-02-07T16:20:02.717Z; avoid date-only values like 2026-02-07.",
    "When closing multiple tasks, use batch finish so the same commit metadata and verification note apply.",
    "Check `closure_commit_requires_approval` in .agentplane/config.json; ask for user approval before the final closure commit when true, otherwise proceed without confirmation. Optionally clean task branches/worktrees after closure."
  ]
}
